== Wallet

This section describes all actions related to wallets.

=== [[link-wallets]] Link wallets link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

This allows users to link his existing wallets with your application. The difference with <<manage-wallets, Manage wallets>>:

- A user can only link wallets, it is not possible to create or import a wallet
- A list of all wallets is returned for any chain (it is possible to filter this).

An example use case could be a portfolio app where a user wants to quickly link all his wallets to get an overview of his complete portfolio.


To link wallets, use the connect building block with:

.URL
https://connect-staging.arkane.network/wallets/link

.Data
_No data needed_

=== [[unlink-wallet]] Unlink wallet link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
This allows applications to unlink a wallet from their app.

Example: a user of a portfolio app does not want a specific Arkane wallet anymore inside the app

operation::third-party-unlink-wallet[snippets='http-request,http-response']

=== [[manage-wallets]] Manage wallets link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

As an application, it is possible to have a user manage his wallets for a specific chain. During this action, the user can link existing wallets or import a wallet.
When the user returns to the app, a wallet will be linked to your application for the given chain. When a user does not have any wallets yet, a user can indicate to create a new wallet.

To manage wallets, use the connect building block with:

.URL
https://connect-staging.arkane.network/wallets/manage


.Data parameters
|===
|Name |Description |Example
|chain
|The chain for which you want to manage wallets.
|ethereum
|===


.Data example
[source,json]
----
{
  "chain": "ethereum"
}
----

=== [[list-wallets]] List wallets link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns all the wallets for the specified user (bearer token)

operation::get-wallets[snippets='curl-request,http-response,response-fields']

It's also possible to filter based on secret type

operation::get-wallets-filtered[snippets='request-parameters']


[[get-specific-user-wallet]]
=== [[get-wallet]] Get wallet link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns the details for a specific wallet (native balance is also included)

operation::get-wallet[snippets='curl-request,path-parameters,http-response,response-fields']

=== [[get-balance]] Native balance link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns the "native" balance for a wallet. This is the balance of the native token used by the chain. Ex. ETH for Ethereum.

operation::get-balance[snippets='curl-request,path-parameters,http-response,response-fields']

=== [[get-token-balances]] Token balances link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns the balance of all tokens currently supported by Arkane. The list of supported tokens can be found on https://github.com/ArkaneNetwork/content-management/tree/master/tokens[Github].

operation::get-token-balances[snippets='curl-request,http-response,response-fields']

=== [[get-token-balance]] Specific token balance link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns the token balance for a specified token (this can be any token).

operation::get-token-balance[snippets='curl-request,path-parameters,http-response,response-fields']

=== [[nft-get-for-address]] List Non Fungible Tokens (NFT's) link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]

[WARNING]
====
Currently this functionallity is only supported for Ethereum wallets (ERC-721), other chains will follow
====

Returns the list of NFT's owned by a wallet

operation::list-non-fungibles[snippets='curl-request,path-parameters,request-parameters,http-response,response-fields']

=== [[wallet-error-codes]] Error codes

|===
|Error Code | Meaning

|wallet.archived
|The wallet that is used appears to be archived

|wallet.forbidden
|Wallet to update was not found or does not belong to the correct user

|wallet.balance.not.supported.yet
|Getting the balance for chain is not supported yet

|wallet.encrypt.internal-error
|Problem while trying to encrypt user secret

|wallet.decrypt.internal-error
|A problem occurred while trying to access your wallet. Please contact support

|wallet.secret.not-found
|The specified secret was not found in our vault

|wallet.secret.internal-error
|An unknown error occurred when trying to fetch the secret. Please contact support.
|===

== Application Wallet

Application wallets are a special type of hybrid wallets that are owned by the user but transactions are initiated by an application. Only
transactions coming from the original application are accepted. Consequently, a user cannot move digital assets out of the wallet
without the application's approval. +
On the other hand, a transaction for this wallet always needs to be signed off with the user's PIN. So the user keeps the right of actually executing a transaction at all times.

Limitations on the application wallets:

* The user cannot initiate a transaction from outside the original application
* The user cannot export the private key of the wallet
* The user cannot connect other 3rd party applications to this application wallet
* The application is able to remove the above-mentioned restrictions, transforming the
application wallet into a normal Arkane wallet (this process cannot be reverted)

image::img/appwallets.png[App wallets]

=== Authentication
To use the application wallet functionality, two separate client ID's will need to be created (see link:buildingblocks.html#_arkane_identity[[.bb-api]#Arkane Identity#]).

* One will be used to create the transaction (steps 2 and 4). It has a naming convention of `<clientId>_app`. This client will authenticate to Arkane using a combination of shared secret and a Bearer token. Because it uses a
shared secret, it needs to be used in a server to server communication channel (the secret may never be exposed to the outside world). How to use this client will be described bellow.
* The other is used to initiate the signing of a transaction by the user (steps 5, 6, 7, 8, 10). This is the same client used for all other Arkane actions and will authenticate to
Arkane using a users Bearer token.

==== [[clientId_app-client]] The `<clientId>_app`-client
As described above, to create a transaction you need to use a `<clientId>_app`-client. For this we use OpenId Connect's link:https://tools.ietf.org/html/rfc6749#section-4.4[Client Credentials Grant]

image::img/appclientauthentication.png[<clientId>_app flow]

Here we'll describe how to obtain a bearer token from our authentication server using your `<clientId>_app`-client:

.URL
https://login.arkane.network/auth/realms/Arkane/protocol/openid-connect/token

.Example Curl Request
[source,bash]
----
$ curl https://login.arkane.network/auth/realms/Arkane/protocol/openid-connect/token -i -X POST \
    -H 'Content-Type: application/x-www-form-urlencoded' \
    -d 'grant_type=client_credentials&client_id=Arketype_app&client_secret=02053a9d-8293-43c4-a201-f8669f1329af'
----
IMPORTANT: Do not forget to set the `Content-Type: application/x-www-form-urlencoded` header (and to make the request body application/x-www-form-urlencoded),
otherwise the request will fail

.Request Fields
|===
| Path | Type | Description | Constraints
| grant_type | String | The OpenId Connect grant type you want to use | Mandatory, always `client_credentials`
| client_id | String | The `<clientId>_app` you want to request a token for | Mandatory, e.g. `Arketype_app`
| client_secret | String | The shared secret you've received when you requested your `<clientId>_app`-client | Mandatory
|===


.Reponse Fields
|===
| Path | Type | Description
| access_token | String | The JWT token to use as bearer token when doing the api calls
| expires_in | number | The amount of seconds the access_token is valid
| refresh_expires_in | number | The amount of seconds the refresh_token is valid
| refresh_token | String | The JWT token which can be used to refresh the current token
| token_type | String | bearer | The type of the access_token
|===


.Response Body
[source,json]
----
{
    "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmQi1UenBOb0hBVGhwT2J4aW9qTDBrdm83MldmRzRXRXh1eFpiaXlGQUhzIn0.eyJqdGkiOiI0ODc4NDM4Ny0xMjE0LTQ0ZTAtYWIzNy0yZDAyZjNjNTYxZWYiLCJleHAiOjE1NTgxMDMxNjIsIm5iZiI6MCwiaWF0IjoxNTU4MTAxMzYyLCJpc3MiOiJodHRwczovL2xvZ2luLXN0YWdpbmcuYXJrYW5lLm5ldHdvcmsvYXV0aC9yZWFsbXMvQXJrYW5lIiwiYXVkIjoiQXJrZXR5cGVfYXBwIiwic3ViIjoiZDQ3NWQwYWEtNjRmOC00MTJhLTg5NmEtOTRmM2RlNjZlNzFkIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiQXJrZXR5cGVfYXBwIiwiYXV0aF90aW1lIjowLCJzZXNzaW9uX3N0YXRlIjoiNzA2MjczYzEtMzBkYi00MDdlLTk1ZmEtZDRlNzg3NDQ5NDY5IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlc291cmNlX2FjY2VzcyI6e30sInNjb3BlIjoic2F2ZTp0cmFuc2FjdGlvbiIsImNsaWVudElkIjoiQXJrZXR5cGVfYXBwIiwiY2xpZW50SG9zdCI6Ijg0LjE5OC4xMzIuMTM0IiwiY2xpZW50QWRkcmVzcyI6Ijg0LjE5OC4xMzIuMTM0In0.iBsj3jlmg0Ns3J4qB9Ii3a3d0Bn4472fhPNrfsYm5gPFnt2l7TOvE4JdUolv0UJe9IMrTyQYv-_EPDU7_lv8edQmyEm2YxUwUzDT747sQmkByPrxguECMrG5eOw69Iw2mtfOHVipGhivXGDr3J-Bngwj1dilYLEz8ncuAG8XrGIlqjZ3C0h_XVKUsfQcg2_EIbqcNPTwoovma1qbpS5kwWmBI4xdNHUVyV_m9HFabc2M8RQvvz5xTX4xhICJzvKRQCKOPFd3XqBNW3kG0iCJkHfOX5GNPn9Efcqfo1xFAEEjTKUOFbs8g4FQlm_YcGPumj3jk0dbN8ROlH8vuuvPxw",
    "expires_in": 1800,
    "refresh_expires_in": 432000,
    "refresh_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJmQi1UenBOb0hBVGhwT2J4aW9qTDBrdm83MldmRzRXRXh1eFpiaXlGQUhzIn0.eyJqdGkiOiI2MTI1MjhkMy02ZGE4LTQwMGMtODAxMS1jNDQ0M2U1MzQ0YzMiLCJleHAiOjE1NTg1MzMzNjIsIm5iZiI6MCwiaWF0IjoxNTU4MTAxMzYyLCJpc3MiOiJodHRwczovL2xvZ2luLXN0YWdpbmcuYXJrYW5lLm5ldHdvcmsvYXV0aC9yZWFsbXMvQXJrYW5lIiwiYXVkIjoiQXJrZXR5cGVfYXBwIiwic3ViIjoiZDQ3NWQwYWEtNjRmOC00MTJhLTg5NmEtOTRmM2RlNjZlNzFkIiwidHlwIjoiUmVmcmVzaCIsImF6cCI6IkFya2V0eXBlX2FwcCIsImF1dGhfdGltZSI6MCwic2Vzc2lvbl9zdGF0ZSI6IjcwNjI3M2MxLTMwZGItNDA3ZS05NWZhLWQ0ZTc4NzQ0OTQ2OSIsInJlc291cmNlX2FjY2VzcyI6e30sInNjb3BlIjoic2F2ZTp0cmFuc2FjdGlvbiJ9.FayuAxy2x1lOw4nQqvn2gZs6Vhqtt7pai6H6LNvFmAxqab3qdnMxQRRFVgrvqfgwaI5bsLrs6CdPU1w2DJmNjh3ubcw-arpM25FVWHufldcTpEA0Xvpo1zssXQrt46kMQ0SMDiRY5e3dhpcd1Uoib9NzZTM5sbwHihqxGyH9HlcO7kGGhdoFW7jXQgGSoBhKsQN1BGvam9p9v-vZSBBQD6YPNttf7cZG77PjK8BAuZczhl7cX8Csmyht6clRTeFKF06NNUwaEcvz7ZXBf2QNJVfAyG26OwUu9ER5bADofGn2P7PnAxDsq_kRXMzOULISLLPi2hdNHOzh2XNvM6znOQ",
    "token_type": "bearer",
}
----


=== [[create-app-wallet]] Create application wallet link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To create an application wallet, Arkane Connect must be used to confirm the creation of the wallet. The user will then be requested to enter their PIN as confirmation.

.URL
https://connect-staging.arkane.network/confirm


.[[create-application-wallet]] Data parameters
|===
|Path|Type|Description|Constraints

|`+confirmationRequestType+`
|`+String+`
|The type of confirmation you are requesting
|Mandatory, must be CREATE_APPLICATION_WALLET to create an application wallet

|`+secretType+`
|`+String+`
|Type of secret to be generated. (Ex. ETHEREUM)
|Mandatory, allowed values: [AETERNITY, BITCOIN, ETHEREUM, GOCHAIN, LITECOIN, TRON, VECHAIN]

|`+alias+`
|`+String+`
|Alias of the wallet. Needs to be unique across your account
|Optional, max 50 chars, allowed charachters: A-Z, a-z, 0-9, - and _

|`+description+`
|`+String+`
|General description of your wallet
|Optional, max 200 chars

|===

=== Create a transaction link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Creating a transaction is done by sending the transaction to Arkane API using the bearer token of your <<clientId_app-client, <clientId>_app-client>>. +
In this example we are doing a generic <<transfer, transfer>>, but you can submit any type of transaction described under <<transactions, Transactions>> as long as the provided
wallet ID is of an application wallet (this is the reason we haven't documented the other request parameters).

operation::save-generic-transaction[snippets='curl-request']

.Data parameters
operation::save-generic-transaction[snippets='request-fields']

.Data example
operation::save-generic-transaction[snippets='request-body']

.Result parameters
operation::save-generic-transaction[snippets='response-fields']

.Result example
operation::save-generic-transaction[snippets='response-body']

=== [[execute-app-wallet-transaction]] Execute a requested transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
Before the transaction will be pushed to the blockchain, it first needs to be approved by the user. This can be done using Arkane Connect.

.URL
https://connect-staging.arkane.network/transaction/execute/:transactionId

.[[execute-application-transaction]] Path Parameters
|===
| Parameter | Description
| `+transactionId+` | The transactionId of the requested transaction
|===

.Example URL
https://connect-staging.arkane.network/transaction/execute/70fc00ec-9b0f-4edb-b301-097cf6ee8e31

=== [[delete-app-wallet-transaction]] Delete  a requested transaction link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
You can delete a requested transaction by calling the transaction endpoint of the Arkane API with method `DELETE`. This can be done by both the user as the application.

.URL
https://api.arkane.network/api/transactions/:transactionId

.[[execute-application-transaction]] Path Parameters
|===
| Parameter | Description
| `+transactionId+` | The transactionId of the requested transaction
|===

operation::delete-transaction-request[snippets='curl-request']

=== [[update-wallet-type]] Migrate wallet to a user wallet link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
From the moment the requirements of an application wallet are not applicable anymore, the type of the application wallet can be migrated to user wallet. As a result, the wallet
will behave the same way as other wallets the user has created manually in Arkane. The user will be able to perform any transaction using this wallet.

In the case for a user wallet, the type of the wallet needs to be updated to:
`THREEWAY_SHARED`

operation::update-wallet-type[snippets='http-request,path-parameters,http-response']

== [[transactions]] Transactions

[[transfer]]
=== Generic Transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
This can be used to transfer native tokens from a wallet to another wallet. To start a transfer you need to:

.URL
https://connect-staging.arkane.network/transaction/execute

.[[generic-transfer]] Data parameters
operation::build-generic-transfer-request[snippets='request-fields']

[IMPORTANT]
====
[[build-value]] ^[1]^ As *value*, we expect the "*decimal value*". If a token has 18 decimals and you want to transfer 1 token, provide the value 1. Arkane will translate this to the correct non decimal value (1 * 10e18).
Using this, you don't have to take into account the number of decimals for different tokens.
====

[NOTE]
====
[[build-network]] ^[2]^ (Only for Ethereum) The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::build-generic-transfer-request[snippets='request-body']

.Result parameters
|===
|Path|Type|Description

|`+transactionHash+`
|`+String+`
|The transaction hash

|===

.Result example
[source,json]
----
{
  "transactionHash" : "0x621f692e386a8bc0c53d36aa793864893106e10f54f63fa9c063e24ad975d907"e
}
----

[[token-transfer]]
=== Generic Token Transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
This can be used to transfer tokens (ex. ERC20/VIP180/NEP5/GO20/...) from a wallet to another wallet. To start a transfer you need to:

.URL
https://connect-staging.arkane.network/transaction/execute

.[[generic-token-transfer]] Data parameters
operation::build-generic-token-transfer-request[snippets='request-fields']

[IMPORTANT]
====
[[build-value]] ^[1]^ As *value*, we expect the "*decimal value*". If a token has 18 decimals and you want to transfer 1 token, provide the value 1. Arkane will translate this to the correct non decimal value (1 * 10e18).
Using this, you don't have to take into account the number of decimals for different tokens.
====

[NOTE]
====
[[build-network]] ^[2]^ (Only for Ethereum) The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::build-generic-token-transfer-request[snippets='request-body']

.Result parameters
|===
|Path|Type|Description

|`+transactionHash+`
|`+String+`
|The transaction hash

|===

.Result example
[source,json]
----
{
  "transactionHash" : "0x621f692e386a8bc0c53d36aa793864893106e10f54f63fa9c063e24ad975d907"e
}
----

[[gas-transfer]]
=== Generic Gas Transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
This can be used to transfer gas (ex. NEO gas/VTHO/...) from a wallet to another wallet. To start a transfer you need to:

.URL
https://connect-staging.arkane.network/transaction/execute

.[[generic-gas-transfer]] Data parameters
operation::build-generic-gas-transfer-request[snippets='request-fields']

[IMPORTANT]
====
[[build-value]] ^[1]^ As *value*, we expect the "*decimal value*". If a token has 18 decimals and you want to transfer 1 token, provide the value 1. Arkane will translate this to the correct non decimal value (1 * 10e18).
Using this, you don't have to take into account the number of decimals for different tokens.
====

[NOTE]
====
[[build-network]] ^[2]^ (Only for Ethereum) The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::build-generic-gas-transfer-request[snippets='request-body']

.Result parameters
|===
|Path|Type|Description

|`+transactionHash+`
|`+String+`
|The transaction hash

|===

.Result example
[source,json]
----
{
  "transactionHash" : "0x621f692e386a8bc0c53d36aa793864893106e10f54f63fa9c063e24ad975d907"e
}
----

[[nft-transfer]]
=== Generic NFT Transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
This can be used to transfer NFT's (ex. ERC721/...) from a wallet to another wallet. To start a transfer you need to:

.URL
https://connect-staging.arkane.network/transaction/execute

.[[generic-nft-transfer]] Data parameters
operation::build-generic-nft-transfer-request[snippets='request-fields']

[NOTE]
====
[[build-network]] ^[1]^ (Only for Ethereum) The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::build-generic-nft-transfer-request[snippets='request-body']

.Result parameters
|===
|Path|Type|Description

|`+transactionHash+`
|`+String+`
|The transaction hash

|===

.Result example
[source,json]
----
{
  "transactionHash" : "0x621f692e386a8bc0c53d36aa793864893106e10f54f63fa9c063e24ad975d907"e
}
----

[[native-transactions]]

=== Ethereum

==== [[execute-eth-transaction]] Execute ETH transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an Ethereum transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/eth_transaction


.Data parameters
operation::execute-ether-transaction[snippets='request-fields']

[NOTE]
====
[[eth-network]] ^[1]^ The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::execute-ether-transaction[snippets='request-body']

.Result parameters
operation::execute-ether-transaction[snippets='response-fields']

.Result example
operation::execute-ether-transaction[snippets='response-body']

==== Execute ERC20 transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

To execute an ERC20 transaction transfer, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/ethereum_erc20_transaction


.Data parameters
operation::execute-erc20-transaction[snippets='request-fields']

[NOTE]
====
[[erc20-network]] ^[1]^ The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::execute-erc20-transaction[snippets='request-body']

.Result parameters
operation::execute-erc20-transaction[snippets='response-fields']

.Result example
operation::execute-erc20-transaction[snippets='response-body']

==== Execute ERC721 transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

To execute an ERC721 transaction transfer, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/ethereum_erc721_transaction


.Data parameters
operation::execute-erc721-transaction[snippets='request-fields']

[NOTE]
====
[[erc721-network]] ^[1]^ The node to which the transaction will be send can be set manually. This can be done using the `network` parameter. +
This feature enables you to submit a transaction to any mainnet node of your choosing, a testnet node (e.g. Kovan, Rinkeby, …​) or a different (private) network altogether.
====

.Data example
operation::execute-erc721-transaction[snippets='request-body']

.Result parameters
operation::execute-erc721-transaction[snippets='response-fields']

.Result example
operation::execute-erc721-transaction[snippets='response-body']


==== Sign link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
Signs arbitrary data. This data is before UTF-8 HEX decoded and enveloped as followed:

`"\x19Ethereum Signed Message:\n" + message.length + message.`

To sign data, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/sign/ethereum_raw

.Data parameters
operation::sign-hex-message[snippets='request-fields']

.Data example
operation::sign-hex-message[snippets='request-body']

.Result parameters
operation::sign-hex-message[snippets='response-fields']

.Result example
operation::sign-hex-message[snippets='response-body']

==== Error Codes

|===
|Error Code | Meaning

|transaction.submit.ethereum-error
|Something went wrong while trying to submit the ethereum transaction

|web3.internal-error
|Something went wrong with the underlying web3 connection.

|web3.estimate.gas.internal-error
|A problem occurred trying to estimate the gas.

|web3.nonce.internal-error
|A problem occurred trying to get the next nonce

|web3.transaction.submit.internal-error
|A problem occurred trying to submit the transaction to the Ethereum network
|===

=== Gochain

==== Execute GO transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an Gochain transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/go_transaction


.Data parameters
operation::execute-go-transaction[snippets='request-fields']

.Data example
operation::execute-go-transaction[snippets='request-body']

.Result parameters
operation::execute-go-transaction[snippets='response-fields']

.Result example
operation::execute-go-transaction[snippets='response-body']

==== Execute GO20 transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

To execute an GO20 transaction transfer, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/ethereum_go20_transaction


.Data parameters
operation::execute-go20-transaction[snippets='request-fields']

.Data example
operation::execute-go20-transaction[snippets='request-body']

.Result parameters
operation::execute-go20-transaction[snippets='response-fields']

.Result example
operation::execute-go20-transaction[snippets='response-body']

==== Sign link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
Signs arbitrary data. This data is before UTF-8 HEX decoded and enveloped as followed:

`"\x19Ethereum Signed Message:\n" + message.length + message.`

To sign data, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/sign/gochain_raw

.Data parameters
operation::sign-hex-message[snippets='request-fields']

.Data example
operation::sign-hex-message[snippets='request-body']

.Result parameters
operation::sign-hex-message[snippets='response-fields']

.Result example
operation::sign-hex-message[snippets='response-body']

==== Error Codes

|===
|Error Code | Meaning

|transaction.submit.gochain-error
|Something went wrong while trying to submit the Gochain transaction
|===

=== Vechain

==== [[execute-vet-transaction]] Execute VET transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an VeChain transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/vet_transaction


.Data parameters
operation::execute-vet-transaction[snippets='request-fields']

.Data example
operation::execute-vet-transaction[snippets='request-body']

.Result parameters
operation::execute-vet-transaction[snippets='response-fields']

.Result example
operation::execute-vet-transaction[snippets='response-body']

==== Execute VTHO transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute a VTHO transfer, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/vtho_transaction

.Data parameters
operation::execute-vtho-transaction[snippets='request-fields']

.Data example
operation::execute-vtho-transaction[snippets='request-body']

.Result parameters
operation::execute-vtho-transaction[snippets='response-fields']

.Result example
operation::execute-vtho-transaction[snippets='response-body']

.Result parameters
|===
|Path|Type|Description

|`+transactionHash+`
|`+String+`
|The transaction hash

|===

.Result example

[source,json]
----
{
  "transactionHash" : "0x621f692e386a8bc0c53d36aa793864893106e10f54f63fa9c063e24ad975d907"
}
----

==== Execute VIP180 transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

To execute an VIP180 transaction transfer, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/vechain_vip180_transaction


.Data parameters
operation::execute-vechain-erc20-transaction[snippets='request-fields']

.Data example
operation::execute-vechain-erc20-transaction[snippets='request-body']

.Result parameters
operation::execute-vechain-erc20-transaction[snippets='response-fields']

.Result example
operation::execute-vechain-erc20-transaction[snippets='response-body']

==== Error Codes

|===
|Error Code | Meaning

|thorify.internal-error
|Something went wrong with the underlying vechain connection

|thorify.transaction.submit.internal-error
|A problem occurred trying to submit the transaction to the vechain network
|===

=== Bitcoin

==== [[execute-bitcoin-transaction]] Execute Bitcoin transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an Bitcoin transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/btc_transaction


.Data parameters
operation::execute-btc-transaction[snippets='request-fields']

.Data example
operation::execute-btc-transaction[snippets='request-body']

.Result parameters
operation::execute-btc-transaction[snippets='response-fields']

.Result example
operation::execute-btc-transaction[snippets='response-body']

==== Error Codes

|Error Code | Meaning
|===
|bitcoin.address-wrong-network
|Something went wrong with the address of this bitcoin wallet on this specific network.

|bitcoin.creation-error
|An error occurred trying to create the Bitcoin transaction.

|bitcoin.transaction-inputs
|The account you're trying to use as origin in the transaction doesn't have valid inputs to send

|bitcoin.not-enough-funds
|Not enough funds to create the transaction

|bitcoin.signing-error
|An error occurred trying to sign the bitcoin transaction.
|===

=== Litecoin

==== [[execute-litecoin-transaction]] Execute Litecoin transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an Litecoin transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/ltc_transaction


.Data parameters
operation::execute-ltc-transaction[snippets='request-fields']

.Data example
operation::execute-ltc-transaction[snippets='request-body']

.Result parameters
operation::execute-ltc-transaction[snippets='response-fields']

.Result example
operation::execute-ltc-transaction[snippets='response-body']

==== Error Codes

|===
|Error Code | Meaning

|litecoin.address-wrong-network
|Something went wrong with the address of this litecoin wallet on this specific network.

|litecoin.creation-error
|An error occurred trying to create the Litecoin transaction.

|litecoin.transaction-inputs
|The account you're trying to use as origin in the transaction doesn't have valid inputs to send

|litecoin.not-enough-funds
|Not enough funds to create the transaction

|litecoin.signing-error
|An error occurred trying to sign the litecoin transaction
|===

=== Tron

==== [[execute-trx-transaction]] Execute a TRON transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an TRON transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/trx_transaction


.Data parameters
operation::execute-trx-transaction[snippets='request-fields']

.Data example
operation::execute-trx-transaction[snippets='request-body']

.Result parameters
operation::execute-trx-transaction[snippets='response-fields']

.Result example
operation::execute-trx-transaction[snippets='response-body']


==== Execute TRC10 transfer link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]

To execute a TRC10 transaction transfer, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/tron_trc10_transaction


.Data parameters
operation::execute-trc10-transaction[snippets='request-fields']

.Data example
operation::execute-trc10-transaction[snippets='request-body']

.Result parameters
operation::execute-trc10-transaction[snippets='response-fields']

.Result example
operation::execute-trc10-transaction[snippets='response-body']

==== Sign Raw Data link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
Signs arbitrary data. .

To sign data, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/sign/tron_raw

.Data parameters
operation::sign-tron-hex-message[snippets='request-fields']

.Data example
operation::sign-tron-hex-message[snippets='request-body']

.Result parameters
operation::sign-tron-hex-message[snippets='response-fields']

.Result example
operation::sign-tron-hex-message[snippets='response-body']

==== Error Codes

|===
|Error Code | Meaning

|tron.balance.bandwidth-error
|Unable to fetch bandwidth

|tron.signature.error
|An error occurred trying to create a tron signature
|===

=== Aeternity

==== [[execute-aeternity-transaction]] Execute AEternity transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an AEternity transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/ae_transaction


.Data parameters
operation::execute-ae-transaction[snippets='request-fields']

.Data example
operation::execute-ae-transaction[snippets='request-body']

.Result parameters
operation::execute-ae-transaction[snippets='response-fields']

.Result example
operation::execute-ae-transaction[snippets='response-body']

=== Neo

==== [[execute-neo-native-transaction]] Execute NEO Native transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an Neo Native transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/neo_native_transaction


.Data parameters
operation::execute-neo-native-transaction[snippets='request-fields']

.Data example
operation::execute-neo-native-transaction[snippets='request-body']

.Result parameters
operation::execute-neo-native-transaction[snippets='response-fields']

.Result example
operation::execute-neo-native-transaction[snippets='response-body']

==== [[execute-neo-gas-transaction]] Execute NEO Gas transaction link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To execute an Neo Gas transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/neo_gas_transaction


.Data parameters
operation::execute-neo-gas-transaction[snippets='request-fields']

.Data example
operation::execute-neo-gas-transaction[snippets='request-body']

.Result parameters
operation::execute-neo-gas-transaction[snippets='response-fields']

.Result example
operation::execute-neo-gas-transaction[snippets='response-body']

==== [[sign-neo-raw-message]] Sign Raw NEO Message link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
To sign a raw neo transaction, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/execute/neo_raw


.Data parameters
operation::sign-neo-raw-message[snippets='request-fields']

.Data example
operation::sign-neo-raw-message[snippets='request-body']

.Result parameters
operation::sign-neo-raw-message[snippets='response-fields']

.Result example
operation::sign-neo-raw-message[snippets='response-body']

==== Sign message link:buildingblocks.html#_arkane_connect[[.bb-connect]#Arkane Connect#]
Sign a message (arbitrary data).

To sign data, use the connect building block with:

.URL
https://connect-staging.arkane.network/transaction/sign/neo_message

.Data parameters
operation::sign-neo-message[snippets='request-fields']

.Data example
operation::sign-neo-message[snippets='request-body']

.Result parameters
operation::sign-neo-message[snippets='response-fields']

.Result example
operation::sign-neo-message[snippets='response-body']

=== [[transaction-error-codes]] Transaction Error Codes

|===
|Error Code | Meaning

|transaction.sign.internal-error
|A problem occurred trying to submit the sign the request

|transaction.insufficient-funds
|The account that initiated the transfer does not have enough energy

|transaction.sign.gas-error
|Unable to fetch default gas prices

|transaction.submit.internal-error
|A problem occurred trying to submit the sign the request

|transaction.submit.not-supported-yet
|Submitting a request to this network is not possible yet
|===

== Swap
This section describes how to use the swapping functionality within Arkane. It allows you to swap/exchange a (native) token to (native) token.

=== [[swap-get-trading-pairs]] Trading pairs link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns the list of possible trading pairs for a given wallet.

operation::swap-tradingpairs[snippets='curl-request,path-parameters,http-response,response-fields']

=== [[swap-get-exchange-rate]] Exchange rate link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns the exchange rates for a specified swap.

operation::swap-exchangerate[snippets='curl-request,request-parameters,http-response,response-fields']

=== [[swap-get-exchange-rate]] Create swap link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Creates the transaction requests that are needed to execute the swap. With this result (the transaction requests), you will need to call the native transactions
endpoint to execute the swap. Ex. for VeChain, use the output from this call to the input of: <<execute-vet-transaction, Execute VET transaction>>

operation::swap[snippets='curl-request,path-parameters,http-response,response-fields']

=== [[swap-error-codes]] Swap Error Tokens

|===
|Error Code | Meaning

|swap.no-exchange-found
|No SwapService found for SwapExchange

|swap.uniswap.get-price.failed
|Unable to get the price of a token on uniswap

|swap.uniswap.allowance-error
|Unable to get allowance for token on uniswap

|swap.uniswap.exchange-not-found
|An exchange contract for a token on uniswap could not be found
|===

== Profile
=== [[user-profile]] User profile link:buildingblocks.html#_arkane_api[[.bb-api]#Arkane API#]
Returns more info about the connected user.

operation::get-profile[snippets='http-request,http-response,response-fields']
